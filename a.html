<!DOCTYPE html>
<html>
<body>

<script>
    var filterData = {
        "category": {
            "collaboration": 253,
            "media": 225,
            "general-internet": 240,
            "bussiness-systems": 218
        },
        "subcategory": {
            "email": 40,
            "gaming": 115,
            "audio-streaming": 110,
            "social-business": 39,
            "file-sharing": 240,
            "social-networking": 53,
            "general-business": 27,
            "marketing": 25,
            "instant-messaging": 33,
            "management": 32,
            "database": 21,
            "software-update": 21,
            "erp-crm": 28,
            "internet-conferencing": 51,
            "software-development": 25,
            "office-programs": 20,
            "voip-video": 37,
            "auth-service": 19
        },
        "technology": {
            "client-server": 302,
            "network-protocol": 328,
            "browser-based": 306
        },
        "risk": {
            "1": 234,
            "2": 248,
            "3": 229,
            "4": 225
        },
        "characteristic": {
            "Evasive": 833,
            "Excessive Bandwidth": 698,
            "Prone to Misuse": 581,
            "SaaS": 455,
            "Transfer Files": 330,
            "Tunnels Other Apps": 234,
            "Used by Malware": 117
        }
    }


    var propertyData = {
        "technologyList": [
            {
                "propertyId": 6,
                "parentId": "0",
                "propertyValue": "browser-based",
                "appNum": 8
            },
            {
                "propertyId": 7,
                "parentId": "0",
                "propertyValue": "client-server",
                "appNum": 4
            }
        ],
        "riskList": [
            {
                "propertyId": 8,
                "parentId": "0",
                "propertyValue": "1",
                "appNum": 4
            },
            {
                "propertyId": 9,
                "parentId": "0",
                "propertyValue": "2",
                "appNum": 4
            }
        ],
        "subcategoryList": [
            {
                "propertyId": 3,
                "parentId": "0",
                "propertyValue": "infrastructure",
                "appNum": 5
            },
            {
                "propertyId": 4,
                "parentId": "0",
                "propertyValue": "file-sharing",
                "appNum": 4
            },
            {
                "propertyId": 5,
                "parentId": "0",
                "propertyValue": "ip-protocol",
                "appNum": 3
            }
        ],
        "categoryList": [
            {
                "propertyId": 1,
                "parentId": "0",
                "propertyValue": "bussiness-systems",
                "appNum": 4
            },
            {
                "propertyId": 2,
                "parentId": "0",
                "propertyValue": "collaboration",
                "appNum": 4
            },
            {
                "propertyId": 19,
                "parentId": "0",
                "propertyValue": "general-internet",
                "appNum": 4
            },
            {
                "propertyId": 20,
                "parentId": "0",
                "propertyValue": "media",
                "appNum": 4
            },
            {
                "propertyId": 21,
                "parentId": "0",
                "propertyValue": "networking",
                "appNum": 4
            }
        ],
        "characteristicsList": [
            {
                "propertyId": 10,
                "parentId": "0",
                "propertyValue": "Evasive",
                "appNum": 5
            },
            {
                "propertyId": 11,
                "parentId": "0",
                "propertyValue": "Excessive Bandwidth",
                "appNum": 4
            },
            {
                "propertyId": 12,
                "parentId": "0",
                "propertyValue": "Prone to Misuse",
                "appNum": 5
            },
            {
                "propertyId": 13,
                "parentId": "0",
                "propertyValue": "SaaS",
                "appNum": 3
            },
            {
                "propertyId": 14,
                "parentId": "0",
                "propertyValue": "Transfer Files",
                "appNum": 3
            },
            {
                "propertyId": 15,
                "parentId": "0",
                "propertyValue": "Tunnels Other Apps",
                "appNum": 0
            },
            {
                "propertyId": 16,
                "parentId": "0",
                "propertyValue": "Used by Malware",
                "appNum": 0
            },
            {
                "propertyId": 17,
                "parentId": "0",
                "propertyValue": "Vulnerability",
                "appNum": 0
            },
            {
                "propertyId": 18,
                "parentId": "0",
                "propertyValue": "Widely used",
                "appNum": 0
            }
        ]
    }


    var keyMapping = {
        categoryList: "category",
        subcategoryList: "subcategory",
        technologyList: "technology",
        riskList: "risk",
        characteristicsList: "characteristic",
    };


    //遍历 转换关键字
    var propKey = null
    for (propKey in propertyData) {
        var tempKey = keyMapping[propKey];
        propertyData[tempKey] = propertyData[propKey]
        delete propertyData[propKey]
    }

    for (propKey in propertyData) {
       if(!filterData[propKey]){
           filterData[propKey]={}
       }
        propertyData[propKey].forEach((item,index)=>{
            var propertyValue=item['propertyValue']
            if(!filterData[propKey][propertyValue]){
                filterData[propKey][propertyValue]=0
            }
        })

    }
    console.log(filterData);

</script>

</body>
</html>
